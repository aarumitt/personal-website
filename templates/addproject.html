{% extends "base.html" %}

{% block title %}Add Project â€” Aarushi Mittal{% endblock %}

{% block description %}Add new projects to the portfolio database.{% endblock %}

{% block content %}
<section class="section">
  <div class="container">
    <h1>Add New Project</h1>
    <p class="muted">Fill out the form below to add a new project to the portfolio.</p>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-messages">
          {% for category, message in messages %}
            <div class="flash-message flash-{{ category }}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <!-- Project Form -->
    <div class="contact-form-container">
      <h2>Project Information</h2>
      <form action="{{ url_for('addproject') }}" method="post" enctype="multipart/form-data" novalidate>
        <div>
          <label for="title">Project Title</label>
          <input id="title" name="title" type="text" required aria-required="true" placeholder="Enter project title" />
        </div>

        <div>
          <label for="description">Project Description</label>
          <textarea id="description" name="description" required aria-required="true" placeholder="Enter project description" rows="4"></textarea>
        </div>

        <div>
          <label for="imageFile">Project Image</label>
          <input id="imageFile" name="imageFile" type="file" accept="image/*" required aria-required="true" />
          <p class="help">Upload an image file (PNG, JPG, JPEG, GIF, WebP). Max size: 16MB</p>
        </div>

        <button class="btn btn-primary" type="submit">Add Project</button>
      </form>
    </div>

    <div class="spacer-lg"></div>

    <!-- Display Existing Projects -->
    <div class="projects-table-container">
      <h2>Current Projects in Database</h2>
      <table class="projects-table">
        <thead>
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Image</th>
          </tr>
        </thead>
        <tbody>
          {% for project in projects %}
          <tr>
            <td>{{ project.Title }}</td>
            <td>{{ project.Description }}</td>
            <td>
              <img 
                src="{{ url_for('static', filename='images/' + project.Image) }}" 
                alt="{{ project.Title }} Image" 
                height="100" 
                width="150"
                style="object-fit: cover; border-radius: 4px;">
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<style>
/* Flash Messages */
.flash-messages {
  margin-bottom: 1.5rem;
}

.flash-message {
  padding: 12px 16px;
  border-radius: 4px;
  margin-bottom: 8px;
  font-weight: 500;
}

.flash-success {
  background-color: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.flash-error {
  background-color: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

/* File Input Styling */
input[type="file"] {
  width: 100%;
  padding: 8px 12px;
  border: 2px dashed #ccc;
  border-radius: 4px;
  background-color: #f9f9f9;
  cursor: pointer;
  transition: border-color 0.3s ease;
}

input[type="file"]:hover {
  border-color: #007bff;
}

input[type="file"]:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.projects-table-container {
  margin-top: 2rem;
}

.projects-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1rem;
}

.projects-table th,
.projects-table td {
  padding: 12px;
  text-align: left;
  border-bottom: 1px solid #e0e0e0;
}

.projects-table th {
  background-color: #f8f9fa;
  font-weight: 600;
  color: #333;
}

.projects-table tr:hover {
  background-color: #f8f9fa;
}

.projects-table td:first-child {
  font-weight: 500;
  min-width: 150px;
}

.projects-table td:nth-child(2) {
  max-width: 400px;
  word-wrap: break-word;
}

.projects-table img {
  border: 1px solid #e0e0e0;
}
</style>
{% endblock %}
